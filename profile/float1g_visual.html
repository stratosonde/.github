<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Step-by-Step Balloon Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{font-family:'Segoe UI',Arial,sans-serif;margin:20px;background:#f0f2f5;max-width:1200px;margin:20px auto;}
h1{color:#1a1a1a;text-align:center;margin-bottom:10px;}
.subtitle{text-align:center;color:#666;margin-bottom:30px;font-size:1.1em;}
.step{background:#fff;border-radius:12px;margin-bottom:25px;padding:25px;box-shadow:0 2px 8px rgba(0,0,0,0.1);border-left:6px solid #ccc;}
.step-1{border-left-color:#4CAF50;}.step-2{border-left-color:#2196F3;}.step-3{border-left-color:#FF9800;}
.step-4{border-left-color:#9C27B0;}.step-5{border-left-color:#F44336;}
.step-header{display:flex;align-items:center;margin-bottom:15px;gap:12px;}
.step-number{background:#1a1a1a;color:white;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:20px;flex-shrink:0;}
.step-title{font-size:1.5em;font-weight:600;color:#1a1a1a;margin:0;}
.step-description{color:#555;margin-bottom:20px;line-height:1.6;font-size:1.05em;}
.inputs-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:18px;margin-top:15px;}
.input-group{margin-bottom:0;}
.input-group label{display:block;font-weight:600;margin-bottom:6px;color:#333;font-size:0.95em;}
.input-help{font-size:0.85em;color:#666;margin-top:3px;}
.input-group input,.input-group select{width:100%;padding:12px;border:2px solid #ddd;border-radius:8px;font-size:1em;box-sizing:border-box;transition:border-color 0.2s;}
.input-group input:focus,.input-group select:focus{outline:none;border-color:#2196F3;}
.calculation-box{background:#f8f9fa;padding:20px;border-radius:8px;margin:15px 0;border:2px solid #dee2e6;}
.calc-step{margin:12px 0;padding:10px;background:white;border-radius:6px;}
.calc-label{color:#666;font-size:0.9em;margin-bottom:5px;}
.calc-equation{color:#1976D2;font-weight:600;margin:5px 0;font-family:monospace;}
.calc-values{color:#2e7d32;margin:5px 0;font-family:monospace;}
.result-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:15px;margin-top:20px;}
.result-item{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:18px;border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,0.1);}
.result-label{font-size:0.9em;opacity:0.9;margin-bottom:8px;}
.result-value{font-size:1.8em;font-weight:bold;}
.result-unit{font-size:0.7em;opacity:0.9;margin-left:4px;}
.explanation{background:#fff8e1;border-left:4px solid #ffc107;border-radius:6px;padding:15px;margin:15px 0;line-height:1.7;}
.explanation strong{color:#f57c00;}
.safety-indicator{padding:20px;border-radius:10px;margin:20px 0;font-weight:bold;text-align:center;font-size:1.1em;}
.safety-safe{background:linear-gradient(135deg,#81c784 0%,#66bb6a 100%);color:white;box-shadow:0 4px 6px rgba(0,0,0,0.1);}
.safety-caution{background:linear-gradient(135deg,#ffb74d 0%,#ffa726 100%);color:white;box-shadow:0 4px 6px rgba(0,0,0,0.1);}
.safety-danger{background:linear-gradient(135deg,#e57373 0%,#ef5350 100%);color:white;box-shadow:0 4px 6px rgba(0,0,0,0.1);}
.chart-container{background:#fff;padding:25px;border-radius:12px;margin:25px 0;box-shadow:0 2px 8px rgba(0,0,0,0.1);}
.chart-title{font-size:1.3em;font-weight:600;margin-bottom:15px;color:#1a1a1a;}
button{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;border:none;padding:12px 24px;border-radius:8px;cursor:pointer;font-size:1em;font-weight:600;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:transform 0.2s;}
button:hover{transform:translateY(-2px);box-shadow:0 6px 12px rgba(0,0,0,0.15);}
.info-box{background:#e3f2fd;border-left:4px solid #2196F3;padding:15px;border-radius:6px;margin:15px 0;}
.info-box strong{color:#1565c0;}
</style>
</head>
<body>
<h1>üéà Superpressure Balloon Calculator</h1>
<p class="subtitle">Follow the physics step-by-step | Based on <a href="https://ukhas.org.uk/doku.php?id=projects:splat" target="_blank">UKHAS SPLAT</a></p>

<div class="step step-1">
<div class="step-header"><div class="step-number">1</div><h2 class="step-title">Define Your Balloon System</h2></div>
<p class="step-description">Enter balloon, payload, and launch conditions.</p>
<div class="inputs-grid">
<div class="input-group"><label for="gas_type">üå¨Ô∏è Lifting Gas</label>
<select id="gas_type">
<option value="0.08522">Hydrogen (0.08522 kg/m¬≥ at 15¬∞C)</option>
<option value="0.0922">Hydrogen 97% (0.0922 kg/m¬≥)</option>
<option value="0.1693">Helium (0.1693 kg/m¬≥ at 15¬∞C)</option>
<option value="0.2010">Helium 97% (0.2010 kg/m¬≥ at 15¬∞C)</option>
</select><div class="input-help">Gas used to fill balloon</div></div>
<div class="input-group"><label for="balloon_volume">üìè Balloon Max Volume</label>
<input type="number" id="balloon_volume" value="0.5" step="0.01">
<div class="input-help">m¬≥ - When fully inflated</div></div>
<div class="input-group"><label for="balloon_weight">‚öñÔ∏è Balloon Weight</label>
<input type="number" id="balloon_weight" value="105" step="1">
<div class="input-help">grams - Envelope only</div></div>
<div class="input-group"><label for="payload_weight">üì¶ Payload Weight</label>
<input type="number" id="payload_weight" value="10" step="1">
<div class="input-help">grams - All non-balloon</div></div>
<div class="input-group"><label for="free_lift">‚¨ÜÔ∏è Free Lift</label>
<input type="number" id="free_lift" value="8" step="1">
<div class="input-help">grams - Extra lift</div></div>
<div class="input-group"><label for="launch_elevation">üèîÔ∏è Launch Elevation</label>
<input type="number" id="launch_elevation" value="0" step="10">
<div class="input-help">meters - Above sea level</div></div>
<div class="input-group"><label for="launch_temp">üå°Ô∏è Launch Temperature</label>
<input type="number" id="launch_temp" value="15" step="0.1">
<div class="input-help">¬∞C - At ground</div></div>
</div></div>

<div class="step step-2">
<div class="step-header"><div class="step-number">2</div><h2 class="step-title">System Density</h2></div>
<p class="step-description">Overall density of balloon+payload system.</p>
<div class="calculation-box">
<div class="calc-step"><div class="calc-label">Gas mass</div>
<div class="calc-equation">Gas Mass = Volume √ó Density √ó 1000</div>
<div class="calc-values" id="calc_gas_mass"></div></div>
<div class="calc-step"><div class="calc-label">Total mass</div>
<div class="calc-equation">Total = Balloon + Payload + Gas</div>
<div class="calc-values" id="calc_total_mass"></div></div>
<div class="calc-step"><div class="calc-label">System density</div>
<div class="calc-equation">Density = Mass / Volume</div>
<div class="calc-values" id="calc_system_density"></div></div>
</div>
<div class="result-grid">
<div class="result-item"><div class="result-label">Gas Mass</div>
<div class="result-value"><span id="gas_mass">0</span><span class="result-unit">g</span></div></div>
<div class="result-item"><div class="result-label">Total Mass</div>
<div class="result-value"><span id="total_mass">0</span><span class="result-unit">g</span></div></div>
<div class="result-item"><div class="result-label">System Density</div>
<div class="result-value"><span id="system_density">0</span><span class="result-unit">kg/m¬≥</span></div></div>
</div></div>

<div class="step step-3">
<div class="step-header"><div class="step-number">3</div><h2 class="step-title">Gas Fill Volume</h2></div>
<p class="step-description">How much gas to fill at launch.</p>
<div class="calculation-box">
<div class="calc-step"><div class="calc-label">Launch pressure</div>
<div class="calc-equation">P = P‚ÇÄ √ó (1 - Lh/T‚ÇÄ)^(gM/RL)</div>
<div class="calc-values" id="calc_launch_pressure"></div></div>
<div class="calc-step"><div class="calc-label">Air density</div>
<div class="calc-equation">œÅ = P / (287.05 √ó T)</div>
<div class="calc-values" id="calc_air_density"></div></div>
<div class="calc-step"><div class="calc-label">Neck lift</div>
<div class="calc-equation">Lift needed at neck</div>
<div class="calc-values" id="calc_neck_lift"></div></div>
<div class="calc-step"><div class="calc-label">Fill volume</div>
<div class="calc-equation">V = Lift / (œÅ_air - œÅ_gas)</div>
<div class="calc-values" id="calc_fill_volume"></div></div>
</div>
<div class="info-box"><strong>üí°</strong> Fill <strong><span id="fill_volume_liters">0</span> liters</strong> of gas at launch.</div>
<div class="result-grid">
<div class="result-item"><div class="result-label">Fill Volume</div>
<div class="result-value"><span id="fill_volume">0</span><span class="result-unit">m¬≥</span></div></div>
<div class="result-item"><div class="result-label">Neck Lift</div>
<div class="result-value"><span id="neck_lift">0</span><span class="result-unit">g</span></div></div>
<div class="result-item"><div class="result-label">Fill Ratio</div>
<div class="result-value"><span id="fill_ratio">0</span><span class="result-unit">%</span></div></div>
</div></div>

<div class="step step-4">
<div class="step-header"><div class="step-number">4</div><h2 class="step-title">Float & Onset Altitude</h2></div>
<p class="step-description">Where balloon reaches max volume and floats.</p>
<div class="calculation-box">
<div class="calc-step"><div class="calc-label">Finding altitude</div>
<div class="calc-equation">V_expand = V_fill √ó (P_launch/P_h) √ó (T_h/T_launch)</div>
<div class="calc-values" id="calc_float_search"></div></div>
</div>
<div class="explanation"><strong>üìç Superpressure Onset:</strong> Altitude where balloon becomes fully inflated. Above this, superpressure builds and <strong>ascent rate slows</strong>.</div>
<div class="result-grid">
<div class="result-item"><div class="result-label">Onset Altitude</div>
<div class="result-value"><span id="onset_altitude">0</span><span class="result-unit">m</span></div></div>
<div class="result-item"><div class="result-label">Float Altitude</div>
<div class="result-value"><span id="float_altitude">0</span><span class="result-unit">m</span></div></div>
<div class="result-item"><div class="result-label">Altitude Gain</div>
<div class="result-value"><span id="altitude_gain">0</span><span class="result-unit">m</span></div></div>
<div class="result-item"><div class="result-label">Temp at Float</div>
<div class="result-value"><span id="temp_float">0</span><span class="result-unit">¬∞C</span></div></div>
</div></div>

<div class="step step-5">
<div class="step-header"><div class="step-number">5</div><h2 class="step-title">Pressure Analysis</h2></div>
<p class="step-description">Pressure differential = stress on balloon.</p>
<div class="calculation-box">
<div class="calc-step"><div class="calc-label">Internal pressure</div>
<div class="calc-equation">P_int = (P_l √ó V_f / T_l) √ó (T_float / V_max)</div>
<div class="calc-values" id="calc_internal_pressure"></div></div>
<div class="calc-step"><div class="calc-label">Differential</div>
<div class="calc-equation">ŒîP = P_internal - P_external</div>
<div class="calc-values" id="calc_diff_pressure"></div></div>
</div>
<div class="explanation"><strong>‚ö†Ô∏è Safety:</strong> Qualatex 36" burst at 4.7-5.4 kPa. Keep ŒîP below this!</div>
<div class="result-grid">
<div class="result-item"><div class="result-label">Internal Pressure</div>
<div class="result-value"><span id="internal_pressure">0</span><span class="result-unit">kPa</span></div></div>
<div class="result-item"><div class="result-label">External Pressure</div>
<div class="result-value"><span id="pressure_float">0</span><span class="result-unit">kPa</span></div></div>
<div class="result-item"><div class="result-label">Differential (kPa)</div>
<div class="result-value"><span id="diff_pressure">0</span><span class="result-unit">kPa</span></div></div>
<div class="result-item"><div class="result-label">Differential (psi)</div>
<div class="result-value"><span id="diff_pressure_psi">0</span><span class="result-unit">psi</span></div></div>
</div>
<div id="safety_indicator" class="safety-indicator safety-safe">‚úÖ Calculating...</div>
</div>

<div class="chart-container">
<h3 class="chart-title">üìä Pressure vs Altitude</h3>
<canvas id="pressureChart" height="300"></canvas>
<div class="info-box"><strong>Chart:</strong> Blue = external pressure (decreases with altitude). Red = internal pressure (equal to external until onset, then increases). Gap = differential pressure (stress on envelope).</div>
</div>

<script src="balloon_calculator.js"></script>
</body>
</html>
